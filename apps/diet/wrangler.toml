# Cloudflare configuration for Diet App
name = "potato-diet"
compatibility_date = "2025-01-01"
pages_build_output_dir = ".vercel/output/static"

# Environment variables
[vars]
OPENROUTER_BASE_URL = "https://openrouter.ai/api/v1"
OPENROUTER_DEFAULT_MODEL = "openai/gpt-oss-20b:free"
OPENROUTER_RECIPE_MODEL = "minimax/minimax-m2:free"

# D1 Database bindings
# Shared Users database (used by both diet and charts apps)
[[d1_databases]]
binding = "DB_USERS"
database_name = "potato-users"
database_id = ""  # Add your database ID after creating with: wrangler d1 create potato-users

# Diet-specific database
[[d1_databases]]
binding = "DB_DIET"
database_name = "potato-diet"
database_id = ""  # Add your database ID after creating with: wrangler d1 create potato-diet

# Deployment instructions:
# 1. Create D1 databases:
#    wrangler d1 create potato-users
#    wrangler d1 create potato-diet
#
# 2. Copy the database IDs to this file
#
# 3. Run migrations:
#    wrangler d1 execute potato-users --remote --file=../../packages/database-users/prisma/migrations/xxx.sql
#    wrangler d1 execute potato-diet --remote --file=../../packages/database-diet/prisma/migrations/xxx.sql
#
# 4. Build and deploy:
#    pnpm run pages:build
#    pnpm run pages:deploy
